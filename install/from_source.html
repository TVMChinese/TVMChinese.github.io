





<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>从源码安装 &mdash; tvm 0.8.dev1726+g998e0b3a6 文档</title>
  

  
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/gallery.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/tlcpack_theme.css" type="text/css" />

  
  
    <link rel="shortcut icon" href="../_static/tvm-logo-square.png"/>
  

  
  
  
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/translations.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <script type="text/javascript" src="../_static/js/tlcpack_theme.js"></script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="NNPACK Contrib Installation" href="nnpack.html" />
    <link rel="prev" title="安装" href="index.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    
<header class="header">
    <div class="innercontainer">
      <div class="headerInner d-flex justify-content-between align-items-center">
          <div class="headerLogo">
               <a href="https://tvm.apache.org/"><img src=https://tvm.apache.org/assets/images/logo.svg alt="logo"></a>
          </div>

          <div id="headMenu" class="headerNav">
            <button type="button" id="closeHeadMenu" class="navCloseBtn"><img src="../_static/img/close-icon.svg" alt="Close"></button>
             <ul class="nav">
                <li class="nav-item">
                   <a class="nav-link" href=https://tvm.apache.org/community>Community</a>
                </li>
                <li class="nav-item">
                   <a class="nav-link" href=https://tvm.apache.org/download>Download</a>
                </li>
                <li class="nav-item">
                   <a class="nav-link" href=https://tvm.apache.org/vta>VTA</a>
                </li>
                <li class="nav-item">
                   <a class="nav-link" href=https://tvm.apache.org/blog>Blog</a>
                </li>
                <li class="nav-item">
                   <a class="nav-link" href=https://tvm.apache.org/docs>Docs</a>
                </li>
                <li class="nav-item">
                   <a class="nav-link" href=https://tvmconf.org>Conference</a>
                </li>
                <li class="nav-item">
                   <a class="nav-link" href=https://github.com/apache/tvm/>Github</a>
                </li>
                <li class="nav-item">
                   <a class="nav-link" href=https://tvmchinese.github.io/declaration_zh_CN.html>Translate-Contribution</a>
                </li>
             </ul>
               <div class="responsivetlcdropdown">
                 <button type="button" class="btn-link">
                   ASF
                 </button>
                 <ul>
                     <li>
                       <a href=https://apache.org/>Apache Homepage</a>
                     </li>
                     <li>
                       <a href=https://www.apache.org/licenses/>License</a>
                     </li>
                     <li>
                       <a href=https://www.apache.org/foundation/sponsorship.html>Sponsorship</a>
                     </li>
                     <li>
                       <a href=https://www.apache.org/security/>Security</a>
                     </li>
                     <li>
                       <a href=https://www.apache.org/foundation/thanks.html>Thanks</a>
                     </li>
                     <li>
                       <a href=https://www.apache.org/events/current-event>Events</a>
                     </li>
                 </ul>
               </div>
          </div>
            <div class="responsiveMenuIcon">
              <button type="button" id="menuBtn" class="btn-menu"><img src="../_static/img/menu-icon.svg" alt="Menu Icon"></button>
            </div>

            <div class="tlcDropdown">
              <div class="dropdown">
                <button type="button" class="btn-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  ASF
                </button>
                <div class="dropdown-menu dropdown-menu-right">
                  <ul>
                     <li>
                       <a href=https://apache.org/>Apache Homepage</a>
                     </li>
                     <li>
                       <a href=https://www.apache.org/licenses/>License</a>
                     </li>
                     <li>
                       <a href=https://www.apache.org/foundation/sponsorship.html>Sponsorship</a>
                     </li>
                     <li>
                       <a href=https://www.apache.org/security/>Security</a>
                     </li>
                     <li>
                       <a href=https://www.apache.org/foundation/thanks.html>Thanks</a>
                     </li>
                     <li>
                       <a href=https://www.apache.org/events/current-event>Events</a>
                     </li>
                  </ul>
                </div>
              </div>
          </div>
       </div>
    </div>
 </header>
 
    <nav data-toggle="wy-nav-shift" class="wy-nav-side fixed">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html">
          

          
            
            <img src="../_static/tvm-logo-small.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
                <div class="version">
                  0.8.dev1726+g998e0b3a6
                </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">引导</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">安装</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">从源码安装</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#developers-get-source-from-github">开发者： 从 GitHub 获取源码</a></li>
<li class="toctree-l3"><a class="reference internal" href="#build-the-shared-library">编译共享库</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#building-with-a-conda-environment">构建一个 Conda 环境</a></li>
<li class="toctree-l4"><a class="reference internal" href="#building-on-windows">Building on Windows</a></li>
<li class="toctree-l4"><a class="reference internal" href="#building-rocm-support">Building ROCm support</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#python-package-installation">Python Package Installation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#tvm-package">TVM package</a></li>
<li class="toctree-l4"><a class="reference internal" href="#python-dependencies">Python 依赖项</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#install-contrib-libraries">安装 Contrib 库</a><ul>
<li class="toctree-l4"><a class="reference internal" href="nnpack.html">NNPACK Contrib Installation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#enable-c-tests">使用 C++ 测试</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="docker.html">Docker 镜像</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contribute/index.html">为 TVM 做出贡献</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/index.html">部署和集成</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev/how_to.html">开发者指南</a></li>
<li class="toctree-l1"><a class="reference internal" href="../microtvm/index.html">mocroTVM： 裸机使用 TVM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../errors.html">使用 TVM 时遇到 Errors 怎么做</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq.html">常见提问</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">教程</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html">Getting Started With TVM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html#compile-deep-learning-models">Compile Deep Learning Models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html#tensor-expression-and-schedules">Tensor Expression and Schedules</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html#optimize-tensor-operators">Optimize Tensor Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html#autotvm-template-based-auto-tuning">AutoTVM : Template-based Auto Tuning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html#autoscheduler-template-free-auto-scheduling">AutoScheduler : Template-free Auto Scheduling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html#developer-tutorials">Developer Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html#topi-tvm-operator-inventory">TOPI: TVM Operator Inventory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tutorials/index.html#microtvm">microTVM</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">参考</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../langref/index.html">Language Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/python/index.html">Python API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/links.html">其它 API 参考链接</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">深入</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dev/index.html">Design and Architecture</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">杂项</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../vta/index.html">VTA: Deep Learning Accelerator Stack</a></li>
<li class="toctree-l1"><a class="reference internal" href="../profiling/index.html">Profiling Deep Learning Models</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../genindex.html">索引</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      
      <nav class="wy-nav-top" aria-label="top navigation" data-toggle="wy-nav-top">
        
            <div class="togglemenu">

            </div>
            <div class="nav-content">
              <!-- tvm -->
              Table of content
            </div>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        

          




















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> <span class="br-arrow">></span></li>
        
          <li><a href="index.html">安装</a> <span class="br-arrow">></span></li>
        
      <li>从源码安装</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/install/from_source.rst.txt" rel="nofollow"> <img src="../_static//img/source.svg" alt="viewsource"/></a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="install-from-source">
<span id="id1"></span><h1>从源码安装<a class="headerlink" href="#install-from-source" title="永久链接至标题">¶</a></h1>
<p>此页面提供了有关如何在各种系统上从头开始编译和安装 TVM 的说明。 它有两个步骤组成：</p>
<ol class="arabic simple">
<li><p>首先从 C++ 代码编译共享库 （Linux: <cite>libtvm.so</cite>，macOS: <cite>libtvm.dylib</cite>，windows: <cite>libtvm.dll</cite>）。</p></li>
<li><p>语言包的设置 （例如： Python包）</p></li>
</ol>
<p>首先, 从 <a class="reference external" href="https://tvm.apache.org/download">下载页</a> 下载 TVM 源代码</p>
<div class="section" id="developers-get-source-from-github">
<h2>开发者： 从 GitHub 获取源码<a class="headerlink" href="#developers-get-source-from-github" title="永久链接至标题">¶</a></h2>
<p>您也可以选择从 github 克隆源代码库。 使用 <code class="docutils literal notranslate"><span class="pre">--recursive</span></code> 选项克隆子模块很重要</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone --recursive https://github.com/apache/tvm tvm
</pre></div>
</div>
<p>对于使用github工具的windows用户，可以打开 git shell，输入以下命令。</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git submodule init
git submodule update
</pre></div>
</div>
</div>
<div class="section" id="build-the-shared-library">
<span id="build-shared-library"></span><h2>编译共享库<a class="headerlink" href="#build-the-shared-library" title="永久链接至标题">¶</a></h2>
<p>我们的目标是编译共享库：</p>
<blockquote>
<div><ul class="simple">
<li><p>在 Linux 上，目标库是 <cite>libtvm.so</cite> 和 <cite>libtvm_runtime.so</cite></p></li>
<li><p>在 macOS 上，目标库是 <cite>libtvm.dylib</cite> 和 <cite>libtvm_runtime.dylib</cite></p></li>
<li><p>在 Windows 上，目标库是 <cite>libtvm.dll</cite> 和 <cite>libtvm_runtime.dll</cite></p></li>
</ul>
</div></blockquote>
<p>也可以只 <a class="reference internal" href="../deploy/index.html#deploy-and-integration"><span class="std std-ref">构建 runtime</span></a> 库。</p>
<p>编译 TVM 库的最低要求是：</p>
<blockquote>
<div><ul class="simple">
<li><p>支持 C++ 14（g++-5 或更高）的最新 C++ 编译器</p></li>
<li><p>CMake 3.5 版本或者更高版本</p></li>
<li><p>我们强烈建议使用 LLVM 编译以启用所有功能。</p></li>
<li><p>如果要使用 CUDA，则需要 CUDA 工具包版本 &gt;= 8.0。如果您是从旧版本升级，请确保清除旧版本并在安装后重新启动。</p></li>
<li><p>在 macOS 上，您可能需要安装 <cite>Homebrew &lt;https://brew.sh&gt;</cite> 来轻松安装和管理依赖项。</p></li>
<li><p>还需要 Python。 避免使用不受 <a class="reference external" href="https://github.com/apache/tvm/issues/8577">支持</a> 的 Python 3.9.X+，3.7.X+ 和 3.8.X+ 应该得到很好的支持。</p></li>
</ul>
</div></blockquote>
<p>要在 Ubuntu/Debian 等 linux 操作系统上安装, 请满足这些最小先决条件，请执行（在终端中）:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt-get update
sudo apt-get install -y python3 python3-dev python3-setuptools gcc libtinfo-dev zlib1g-dev build-essential cmake libedit-dev libxml2-dev
</pre></div>
</div>
<p>使用 Homebrew 为运行 Intel 或 M1 处理器的 macOS 安装所需的依赖项。 您必须遵循 Homebrew 指定的安装后步骤以确保正确安装和配置依赖项：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>brew install gcc git cmake
brew install llvm
brew install python@3.8
</pre></div>
</div>
<p>我们用 cmake 来建造 library。TVM 的配置可以通过编辑 <cite>config.cmake</cite> 或将 cmake 标志传递到命令行进行修改：</p>
<ul>
<li><p>First, check the cmake in your system. If you do not have cmake,
you can obtain the latest version from <a class="reference external" href="https://cmake.org/download/">official website</a></p></li>
<li><p>First create a build directory, copy the <code class="docutils literal notranslate"><span class="pre">cmake/config.cmake</span></code> to the directory.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir build
cp cmake/config.cmake build
</pre></div>
</div>
</li>
<li><p>Edit <code class="docutils literal notranslate"><span class="pre">build/config.cmake</span></code> to customize the compilation options</p>
<ul>
<li><p>On macOS, for some versions of Xcode, you need to add <code class="docutils literal notranslate"><span class="pre">-lc++abi</span></code> in the LDFLAGS or you’ll get link errors.</p></li>
<li><p>Change <code class="docutils literal notranslate"><span class="pre">set(USE_CUDA</span> <span class="pre">OFF)</span></code> to <code class="docutils literal notranslate"><span class="pre">set(USE_CUDA</span> <span class="pre">ON)</span></code> to enable CUDA backend. Do the same for other backends and libraries
you want to build for (OpenCL, RCOM, METAL, VULKAN, …).</p></li>
<li><p>To help with debugging, ensure the embedded graph executor and debugging functions are enabled with <code class="docutils literal notranslate"><span class="pre">set(USE_GRAPH_EXECUTOR</span> <span class="pre">ON)</span></code> and <code class="docutils literal notranslate"><span class="pre">set(USE_PROFILER</span> <span class="pre">ON)</span></code></p></li>
<li><p>To debug with IRs, <code class="docutils literal notranslate"><span class="pre">set(USE_RELAY_DEBUG</span> <span class="pre">ON)</span></code> and set environment variable <cite>TVM_LOG_DEBUG</cite>.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">TVM_LOG_DEBUG</span><span class="o">=</span><span class="m">1</span>
</pre></div>
</div>
</div></blockquote>
</li>
</ul>
</li>
<li><p>TVM requires LLVM for for CPU codegen. We highly recommend you to build with the LLVM support on.</p>
<ul class="simple">
<li><p>LLVM 4.0 or higher is needed for build with LLVM. Note that version of LLVM from default apt may lower than 4.0.</p></li>
<li><p>Since LLVM takes long time to build from source, you can download pre-built version of LLVM from
<a class="reference external" href="http://releases.llvm.org/download.html">LLVM Download Page</a>.</p>
<ul>
<li><p>Unzip to a certain location, modify <code class="docutils literal notranslate"><span class="pre">build/config.cmake</span></code> to add <code class="docutils literal notranslate"><span class="pre">set(USE_LLVM</span> <span class="pre">/path/to/your/llvm/bin/llvm-config)</span></code></p></li>
<li><p>You can also directly set <code class="docutils literal notranslate"><span class="pre">set(USE_LLVM</span> <span class="pre">ON)</span></code> and let cmake search for a usable version of LLVM.</p></li>
</ul>
</li>
<li><p>You can also use <a class="reference external" href="https://apt.llvm.org/">LLVM Nightly Ubuntu Build</a></p>
<ul>
<li><p>Note that apt-package append <code class="docutils literal notranslate"><span class="pre">llvm-config</span></code> with version number.
For example, set <code class="docutils literal notranslate"><span class="pre">set(USE_LLVM</span> <span class="pre">llvm-config-10)</span></code> if you installed LLVM 10 package</p></li>
</ul>
</li>
</ul>
</li>
<li><p>We can then build tvm and related libraries.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> build
cmake ..
make -j4
</pre></div>
</div>
<ul class="simple">
<li><p>You can also use Ninja build system instead of Unix Makefiles. It can be faster to build than using Makefiles.</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> build
cmake .. -G Ninja
ninja
</pre></div>
</div>
<ul>
<li><p>There is also a makefile in the top-level tvm directory that can
automate several of these steps.  It will create the build
directory, copy the default <code class="docutils literal notranslate"><span class="pre">config.cmake</span></code> to the build
directory, run cmake, then run make.</p>
<p>The build directory can be specified using the environment
variable <code class="docutils literal notranslate"><span class="pre">TVM_BUILD_PATH</span></code>.  If <code class="docutils literal notranslate"><span class="pre">TVM_BUILD_PATH</span></code> is unset, the
makefile assumes that the <code class="docutils literal notranslate"><span class="pre">build</span></code> directory inside tvm should be
used.  Paths specified by <code class="docutils literal notranslate"><span class="pre">TVM_BUILD_PATH</span></code> can be either
absolute paths or paths relative to the base tvm directory.
<code class="docutils literal notranslate"><span class="pre">TVM_BUILD_PATH</span></code> can also be set to a list of space-separated
paths, in which case all paths listed will be built.</p>
<p>If an alternate build directory is used, then the environment
variable <code class="docutils literal notranslate"><span class="pre">TVM_LIBRARY_PATH</span></code> should be set at runtime, pointing
to the location of the compiled <code class="docutils literal notranslate"><span class="pre">libtvm.so</span></code> and
<code class="docutils literal notranslate"><span class="pre">libtvm_runtime.so</span></code>.  If not set, tvm will look relative to the
location of the tvm python module.  Unlike <code class="docutils literal notranslate"><span class="pre">TVM_BUILD_PATH</span></code>,
this must be an absolute path.</p>
</li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Build in the &quot;build&quot; directory</span>
make

<span class="c1"># Alternate location, &quot;build_debug&quot;</span>
<span class="nv">TVM_BUILD_PATH</span><span class="o">=</span>build_debug make

<span class="c1"># Build both &quot;build_release&quot; and &quot;build_debug&quot;</span>
<span class="nv">TVM_BUILD_PATH</span><span class="o">=</span><span class="s2">&quot;build_debug build_release&quot;</span> make

<span class="c1"># Use debug build</span>
<span class="nv">TVM_LIBRARY_PATH</span><span class="o">=</span>~/tvm/build_debug python3
</pre></div>
</div>
</li>
</ul>
<p>如果一切顺利， 我们就可以进入 <a class="reference internal" href="#python-package-installation"><span class="std std-ref">Python Package Installation</span></a></p>
<div class="section" id="building-with-a-conda-environment">
<span id="build-with-conda"></span><h3>构建一个 Conda 环境<a class="headerlink" href="#building-with-a-conda-environment" title="永久链接至标题">¶</a></h3>
<p>Conda 是获取运行 TVM 所需依赖项的一种非常方便的方法。首先，如果您的系统中还没有 <cite>conda</cite>，请按照 <cite>conda</cite> 的安装指南&lt;<a class="reference external" href="https://docs.conda.io/projects/conda/en/latest/user-guide/install/">https://docs.conda.io/projects/conda/en/latest/user-guide/install/</a>&gt;`_ 安装 <cite>miniconda</cite> 或 <cite>anaconda</cite>。在 <cite>conda</cite> 环境中运行以下命令：</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create a conda environment with the dependencies specified by the yaml</span>
conda env create --file conda/build-environment.yaml
<span class="c1"># Activate the created environment</span>
conda activate tvm-build
</pre></div>
</div>
<p>The above command will install all necessary build dependencies such as cmake and LLVM. You can then run the standard build process in the last section.</p>
<p>If you want to use the compiled binary outside the conda environment,
you can set LLVM to static linking mode <code class="docutils literal notranslate"><span class="pre">set(USE_LLVM</span> <span class="pre">&quot;llvm-config</span> <span class="pre">--link-static&quot;)</span></code>.
In this way, the resulting library won’t depend on the dynamic LLVM libraries in the conda environment.</p>
<p>The above instructions show how to use conda to provide the necessary build dependencies to build libtvm.
If you are already using conda as your package manager and wish to directly build and install tvm as a conda package, you can follow the instructions below:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>conda build --output-folder<span class="o">=</span>conda/pkg  conda/recipe
<span class="c1"># Run conda/build_cuda.sh to build with cuda enabled</span>
conda install tvm -c ./conda/pkg
</pre></div>
</div>
</div>
<div class="section" id="building-on-windows">
<h3>Building on Windows<a class="headerlink" href="#building-on-windows" title="永久链接至标题">¶</a></h3>
<p>TVM support build via MSVC using cmake. You will need to ontain a visual studio compiler.
The minimum required VS version is <strong>Visual Studio Community 2015 Update 3</strong>.
We recommend following <a class="reference internal" href="#build-with-conda"><span class="std std-ref">构建一个 Conda 环境</span></a> to obtain necessary dependencies and
get an activated tvm-build environment. Then you can run the following command to build</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir build
<span class="nb">cd</span> build
cmake -A x64 -Thost<span class="o">=</span>x64 ..
<span class="nb">cd</span> ..
</pre></div>
</div>
<p>The above command generates the solution file under the build directory.
You can then run the following command to build</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cmake --build build --config Release -- /m
</pre></div>
</div>
</div>
<div class="section" id="building-rocm-support">
<h3>Building ROCm support<a class="headerlink" href="#building-rocm-support" title="永久链接至标题">¶</a></h3>
<p>Currently, ROCm is supported only on linux, so all the instructions are written with linux in mind.</p>
<ul class="simple">
<li><p>Set <code class="docutils literal notranslate"><span class="pre">set(USE_ROCM</span> <span class="pre">ON)</span></code>, set ROCM_PATH to the correct path.</p></li>
<li><p>You need to first install HIP runtime from ROCm. Make sure the installation system has ROCm installed in it.</p></li>
<li><p>Install latest stable version of LLVM (v6.0.1), and LLD, make sure <code class="docutils literal notranslate"><span class="pre">ld.lld</span></code> is available via command line.</p></li>
</ul>
</div>
</div>
<div class="section" id="python-package-installation">
<span id="id2"></span><h2>Python Package Installation<a class="headerlink" href="#python-package-installation" title="永久链接至标题">¶</a></h2>
<div class="section" id="tvm-package">
<h3>TVM package<a class="headerlink" href="#tvm-package" title="永久链接至标题">¶</a></h3>
<p>Depending on your development environment, you may want to use a virtual environment and package manager, such
as <code class="docutils literal notranslate"><span class="pre">virtualenv</span></code> or <code class="docutils literal notranslate"><span class="pre">conda</span></code>, to manage your python packages and dependencies.</p>
<p>to install and maintain your python development environment.</p>
<p>The python package is located at <cite>tvm/python</cite>
There are two ways to install the package:</p>
<dl>
<dt>方法 1</dt><dd><p>This method is <strong>recommended for developers</strong> who may change the codes.</p>
<p>Set the environment variable <cite>PYTHONPATH</cite> to tell python where to find
the library. For example, assume we cloned <cite>tvm</cite> on the directory
<cite>/path/to/tvm</cite> then we can add the following line in <cite>~/.bashrc</cite>.
The changes will be immediately reflected once you pull the code and rebuild the project (no need to call <code class="docutils literal notranslate"><span class="pre">setup</span></code> again)</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">TVM_HOME</span><span class="o">=</span>/path/to/tvm
<span class="nb">export</span> <span class="nv">PYTHONPATH</span><span class="o">=</span><span class="nv">$TVM_HOME</span>/python:<span class="si">${</span><span class="nv">PYTHONPATH</span><span class="si">}</span>
</pre></div>
</div>
</dd>
<dt>方法 2</dt><dd><p>通过 <cite>setup.py</cite> 安装 TVM python bindings</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># install tvm package for the current user</span>
<span class="c1"># NOTE: if you installed python via homebrew, --user is not needed during installaiton</span>
<span class="c1">#       it will be automatically installed to your user directory.</span>
<span class="c1">#       providing --user flag may trigger error during installation in such case.</span>
<span class="nb">export</span> <span class="nv">MACOSX_DEPLOYMENT_TARGET</span><span class="o">=</span><span class="m">10</span>.9  <span class="c1"># This is required for mac to avoid symbol conflicts with libstdc++</span>
<span class="nb">cd</span> python<span class="p">;</span> python setup.py install --user<span class="p">;</span> <span class="nb">cd</span> ..
</pre></div>
</div>
</dd>
</dl>
</div>
<div class="section" id="python-dependencies">
<h3>Python 依赖项<a class="headerlink" href="#python-dependencies" title="永久链接至标题">¶</a></h3>
<p>请注意，如果您要安装到托管本地环境， 如 <code class="docutils literal notranslate"><span class="pre">virtualenv</span></code>，则不需要  <code class="docutils literal notranslate"><span class="pre">--user</span></code> 标志。</p>
<blockquote>
<div><ul class="simple">
<li><p>必要的依赖：</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip3 install --user numpy decorator attrs
</pre></div>
</div>
<ul class="simple">
<li><p>如果你想使用 RPC Tracker</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip3 install --user tornado
</pre></div>
</div>
<ul class="simple">
<li><p>如果要使用 auto-tuning 模块</p></li>
</ul>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip3 install --user tornado psutil xgboost cloudpickle
</pre></div>
</div>
</div></blockquote>
<p>请注意，在 M1 macs 上，您可能在安装 xgboost / scipy 时遇到问题。 scipy 和 xgboost 需要安装一些额外的依赖项，包括 openblas 及其依赖项。 使用以下命令安装具有所需依赖项和配置的 scipy 和 xgboost。 解决方法是执行以下命令：</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>brew install openblas gfortran

pip install pybind11 cython pythran

<span class="nb">export</span> <span class="nv">OPENBLAS</span><span class="o">=</span>/opt/homebrew/opt/openblas/lib/

pip install scipy --no-use-pep517

pip install xgboost
</pre></div>
</div>
</div></blockquote>
</div>
</div>
<div class="section" id="install-contrib-libraries">
<h2>安装 Contrib 库<a class="headerlink" href="#install-contrib-libraries" title="永久链接至标题">¶</a></h2>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="nnpack.html">NNPACK Contrib Installation</a></li>
</ul>
</div>
</div>
<div class="section" id="enable-c-tests">
<span id="install-from-source-cpp-tests"></span><h2>使用 C++ 测试<a class="headerlink" href="#enable-c-tests" title="永久链接至标题">¶</a></h2>
<p>我们使用 <a class="reference external" href="https://github.com/google/googletest">Google Test</a> 来驱动 TVM 中的 C++ 测试。 安装 GTest 的最简单方法是从源代码。</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/google/googletest
<span class="nb">cd</span> googletest
mkdir build
<span class="nb">cd</span> build
cmake -DBUILD_SHARED_LIBS<span class="o">=</span>ON ..
make
sudo make install
</pre></div>
</div>
</div></blockquote>
<p>安装 GTest 后，可以使用 <code class="docutils literal notranslate"><span class="pre">./tests/scripts/task_cpp_unittest.sh</span></code> 或仅使用 <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">cpptest</span></code> 构建和启动 C++ 测试。</p>
</div>
</div>


           </div>
           
          </div>
          

<footer>

    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="nnpack.html" class="btn btn-neutral float-right" title="NNPACK Contrib Installation" accesskey="n" rel="next">下一个 <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="index.html" class="btn btn-neutral float-left" title="安装" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> 上一个</a>
      
    </div>

<div id="button" class="backtop"><img src="../_static//img/right.svg" alt="backtop"/> </div>
<section class="footerSec">
    <div class="footerHeader">
      <ul class="d-flex align-md-items-center justify-content-between flex-column flex-md-row">
        <li class="copywrite d-flex align-items-center">
          <h5 id="copy-right-info">© 2020 Apache Software Foundation | All right reserved</h5>
        </li>
      </ul>

    </div>

    <ul>
      <li class="footernote">Copyright © 2020 The Apache Software Foundation. Apache TVM, Apache, the Apache feather, and the Apache TVM project logo are either trademarks or registered trademarks of the Apache Software Foundation.</li>
    </ul>

</section>
</footer>
        </div>
      </div>

    </section>

  </div>
  

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

  </body>
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
    <!-- Theme Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-75982049-2', 'auto');
    ga('send', 'pageview');
    </script>

    
   

</body>
</html>